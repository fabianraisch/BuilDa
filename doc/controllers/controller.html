<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>src.controllers.controller API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>src.controllers.controller</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="src.controllers.controller.Controller"><code class="flex name class">
<span>class <span class="ident">Controller</span></span>
<span>(</span><span>parameters_y='thermalZone.TAir',<br>parameters_u='ctrSignalHeating',<br>parameters_etc=[],<br>w=20,<br>u_min=0,<br>u_max=1)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Controller(ABC):
    &#39;&#39;&#39;
    Abstract base class for custom controllers. It provides basic controller class variables and settings, 
    as well as fundamental functions for all controller classes. 

    Note: It does not provide a working control function; this must be implemented in a custom controller class.
    &#39;&#39;&#39;
    def __init__(self,parameters_y=&#34;thermalZone.TAir&#34;,parameters_u=&#34;ctrSignalHeating&#34;,parameters_etc=[],w=20,u_min=0,u_max=1):         
        self.parameters_y=parameters_y
        self.parameters_u=parameters_u
        self.parameters_etc=parameters_etc
        self.w=w
        self.u_max=u_max
        self.u_min=u_min

    def configure(self,fmu_state_dict):
        &#34;&#34;&#34;
        Configure the Controller object based on the FMU state.

        This method performs additional configuration tasks after class instantiation,
        e.g. resolving linked boundary conditions (limits) for the controller.

        Parameters:
        fmu_state_dict (dict): Dictionary containing the FMU state variables.
        &#34;&#34;&#34;
        #get possibly linked boundary conditions (limits)
        self.w=self.resolve_link_to_fmu_variable(fmu_state_dict=fmu_state_dict,variable=self.w)
        self.u_max=self.resolve_link_to_fmu_variable(fmu_state_dict=fmu_state_dict,variable=self.u_max)
        self.u_min=self.resolve_link_to_fmu_variable(fmu_state_dict=fmu_state_dict,variable=self.u_min)
    

    def control(self, fmu_state_dict: dict, curr_time: int) -&gt; dict:
        &#39;&#39;&#39;
        Control function (to override) receiving a dict describing the current FMU state (key -&gt; name of the parameter, value -&gt; value of the parameter).
        This function only contains the logic of the controller and returns the changes in another dict.

        Args:
            - fmu_state_dict [dict]: Dict describing the current state of the FMU
            - curr_time [int]: Integer representing the current simulation time in seconds

        Returns: Dict containing changes that will be made to the FMU.
        &#39;&#39;&#39;

        return NotImplementedError(&#34;Function control not implemented in this controller. Please override this method first.&#34;)
    

    def get_control_variables(self):
         &#39;&#39;&#39;
         Function to get all the (control) variables the controller needs in its control function to work properly.
         the variables need to be specified in the class&#39; constructor that inherits from this abstract base class.
         In case there are variables the control method needs in its fmu_state_dict, but they are not given in the control variables list, an error will be thrown.

         Args: None

         Returns: A list of all the variable names needed for controlling.
         &#39;&#39;&#39;
         return self.parameters_y, *self.parameters_u, *self.parameters_etc
    
    def get_current_w(self,curr_time):
        &#34;&#34;&#34;
        Get the current value for w.

        If w is a dictionary (indicating a scheduled value), the method retrieves
        the value corresponding to the current second of the day.

        Parameters:
        curr_time (int): The current time in seconds.

        Returns:
        float: The current value of w.
        &#34;&#34;&#34;            
        if type(self.w) is dict: 
            second_of_day=curr_time%86400
            w_dict=self.w
            w_dict_keys_list=list(w_dict.keys())
            w_dict_keys_list.sort()
            w=w_dict[w_dict_keys_list[bisect.bisect_left(w_dict_keys_list,second_of_day)-1]]
        else:
            w=self.w
        return w

    def resolve_link_to_fmu_variable(self,fmu_state_dict,variable):
        &#34;&#34;&#34;
        Resolve a variable name to its value in the FMU state dictionary.

        Parameters:
        fmu_state_dict (dict): Dictionary of state variables.
        variable (str): Variable name to resolve.

        Returns:
        The associated value if found in fmu_state_dict.keys(); otherwise the variable is probably a simple value and the variable is returnd unchanged.
        &#34;&#34;&#34;        
        if type(variable) is str and variable in fmu_state_dict.keys():
            return fmu_state_dict[variable]
        else: 
            return variable</code></pre>
</details>
<div class="desc"><p>Abstract base class for custom controllers. It provides basic controller class variables and settings,
as well as fundamental functions for all controller classes. </p>
<p>Note: It does not provide a working control function; this must be implemented in a custom controller class.</p></div>
<h3>Ancestors</h3>
<ul class="hlist">
<li>abc.ABC</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="src.controllers.custom_controllers.PIController_heating.PIController_heating" href="custom_controllers/PIController_heating.html#src.controllers.custom_controllers.PIController_heating.PIController_heating">PIController_heating</a></li>
<li><a title="src.controllers.custom_controllers.TwoPointController_heating.TwoPointController_heating" href="custom_controllers/TwoPointController_heating.html#src.controllers.custom_controllers.TwoPointController_heating.TwoPointController_heating">TwoPointController_heating</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="src.controllers.controller.Controller.configure"><code class="name flex">
<span>def <span class="ident">configure</span></span>(<span>self, fmu_state_dict)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def configure(self,fmu_state_dict):
    &#34;&#34;&#34;
    Configure the Controller object based on the FMU state.

    This method performs additional configuration tasks after class instantiation,
    e.g. resolving linked boundary conditions (limits) for the controller.

    Parameters:
    fmu_state_dict (dict): Dictionary containing the FMU state variables.
    &#34;&#34;&#34;
    #get possibly linked boundary conditions (limits)
    self.w=self.resolve_link_to_fmu_variable(fmu_state_dict=fmu_state_dict,variable=self.w)
    self.u_max=self.resolve_link_to_fmu_variable(fmu_state_dict=fmu_state_dict,variable=self.u_max)
    self.u_min=self.resolve_link_to_fmu_variable(fmu_state_dict=fmu_state_dict,variable=self.u_min)</code></pre>
</details>
<div class="desc"><p>Configure the Controller object based on the FMU state.</p>
<p>This method performs additional configuration tasks after class instantiation,
e.g. resolving linked boundary conditions (limits) for the controller.</p>
<p>Parameters:
fmu_state_dict (dict): Dictionary containing the FMU state variables.</p></div>
</dd>
<dt id="src.controllers.controller.Controller.control"><code class="name flex">
<span>def <span class="ident">control</span></span>(<span>self, fmu_state_dict: dict, curr_time: int) ‑> dict</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def control(self, fmu_state_dict: dict, curr_time: int) -&gt; dict:
    &#39;&#39;&#39;
    Control function (to override) receiving a dict describing the current FMU state (key -&gt; name of the parameter, value -&gt; value of the parameter).
    This function only contains the logic of the controller and returns the changes in another dict.

    Args:
        - fmu_state_dict [dict]: Dict describing the current state of the FMU
        - curr_time [int]: Integer representing the current simulation time in seconds

    Returns: Dict containing changes that will be made to the FMU.
    &#39;&#39;&#39;

    return NotImplementedError(&#34;Function control not implemented in this controller. Please override this method first.&#34;)</code></pre>
</details>
<div class="desc"><p>Control function (to override) receiving a dict describing the current FMU state (key -&gt; name of the parameter, value -&gt; value of the parameter).
This function only contains the logic of the controller and returns the changes in another dict.</p>
<h2 id="args">Args</h2>
<ul>
<li>fmu_state_dict [dict]: Dict describing the current state of the FMU</li>
<li>curr_time [int]: Integer representing the current simulation time in seconds
Returns: Dict containing changes that will be made to the FMU.</li>
</ul></div>
</dd>
<dt id="src.controllers.controller.Controller.get_control_variables"><code class="name flex">
<span>def <span class="ident">get_control_variables</span></span>(<span>self)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_control_variables(self):
     &#39;&#39;&#39;
     Function to get all the (control) variables the controller needs in its control function to work properly.
     the variables need to be specified in the class&#39; constructor that inherits from this abstract base class.
     In case there are variables the control method needs in its fmu_state_dict, but they are not given in the control variables list, an error will be thrown.

     Args: None

     Returns: A list of all the variable names needed for controlling.
     &#39;&#39;&#39;
     return self.parameters_y, *self.parameters_u, *self.parameters_etc</code></pre>
</details>
<div class="desc"><p>Function to get all the (control) variables the controller needs in its control function to work properly.
the variables need to be specified in the class' constructor that inherits from this abstract base class.
In case there are variables the control method needs in its fmu_state_dict, but they are not given in the control variables list, an error will be thrown.</p>
<p>Args: None</p>
<p>Returns: A list of all the variable names needed for controlling.</p></div>
</dd>
<dt id="src.controllers.controller.Controller.get_current_w"><code class="name flex">
<span>def <span class="ident">get_current_w</span></span>(<span>self, curr_time)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_current_w(self,curr_time):
    &#34;&#34;&#34;
    Get the current value for w.

    If w is a dictionary (indicating a scheduled value), the method retrieves
    the value corresponding to the current second of the day.

    Parameters:
    curr_time (int): The current time in seconds.

    Returns:
    float: The current value of w.
    &#34;&#34;&#34;            
    if type(self.w) is dict: 
        second_of_day=curr_time%86400
        w_dict=self.w
        w_dict_keys_list=list(w_dict.keys())
        w_dict_keys_list.sort()
        w=w_dict[w_dict_keys_list[bisect.bisect_left(w_dict_keys_list,second_of_day)-1]]
    else:
        w=self.w
    return w</code></pre>
</details>
<div class="desc"><p>Get the current value for w.</p>
<p>If w is a dictionary (indicating a scheduled value), the method retrieves
the value corresponding to the current second of the day.</p>
<p>Parameters:
curr_time (int): The current time in seconds.</p>
<p>Returns:
float: The current value of w.</p></div>
</dd>
<dt id="src.controllers.controller.Controller.resolve_link_to_fmu_variable"><code class="name flex">
<span>def <span class="ident">resolve_link_to_fmu_variable</span></span>(<span>self, fmu_state_dict, variable)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def resolve_link_to_fmu_variable(self,fmu_state_dict,variable):
    &#34;&#34;&#34;
    Resolve a variable name to its value in the FMU state dictionary.

    Parameters:
    fmu_state_dict (dict): Dictionary of state variables.
    variable (str): Variable name to resolve.

    Returns:
    The associated value if found in fmu_state_dict.keys(); otherwise the variable is probably a simple value and the variable is returnd unchanged.
    &#34;&#34;&#34;        
    if type(variable) is str and variable in fmu_state_dict.keys():
        return fmu_state_dict[variable]
    else: 
        return variable</code></pre>
</details>
<div class="desc"><p>Resolve a variable name to its value in the FMU state dictionary.</p>
<p>Parameters:
fmu_state_dict (dict): Dictionary of state variables.
variable (str): Variable name to resolve.</p>
<p>Returns:
The associated value if found in fmu_state_dict.keys(); otherwise the variable is probably a simple value and the variable is returnd unchanged.</p></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="src.controllers" href="index.html">src.controllers</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="src.controllers.controller.Controller" href="#src.controllers.controller.Controller">Controller</a></code></h4>
<ul class="">
<li><code><a title="src.controllers.controller.Controller.configure" href="#src.controllers.controller.Controller.configure">configure</a></code></li>
<li><code><a title="src.controllers.controller.Controller.control" href="#src.controllers.controller.Controller.control">control</a></code></li>
<li><code><a title="src.controllers.controller.Controller.get_control_variables" href="#src.controllers.controller.Controller.get_control_variables">get_control_variables</a></code></li>
<li><code><a title="src.controllers.controller.Controller.get_current_w" href="#src.controllers.controller.Controller.get_current_w">get_current_w</a></code></li>
<li><code><a title="src.controllers.controller.Controller.resolve_link_to_fmu_variable" href="#src.controllers.controller.Controller.resolve_link_to_fmu_variable">resolve_link_to_fmu_variable</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
